{% extends "base.html" %}
{% block content %}
<div class="quest-course-container">
  <aside class="quest-list">
    <h3>코스 {{ theme }}</h3>
    <ul>
      {% for step in steps %}
      <li class="quest-card">
        <strong>{{ step.id }}.</strong> {{ step.title }}
      </li>
      {% endfor %}
    </ul>
  </aside>
  <!-- 지도 표시 영역 -->
  <section id="map" class="map-placeholder" style="width: 100%; height: 500px;">
    <!-- 지도는 자바스크립트에서 여기에 그려집니다 -->
  </section>
</div>

<!-- 지도 스크립트 -->
<script>
  document.addEventListener("DOMContentLoaded", function () {
    // 네이버 지도 객체 생성
    var map = new naver.maps.Map('map', {
      center: new naver.maps.LatLng(37.579617, 126.977041),
      zoom: 14
    });

    // 서버에서 받은 steps 데이터를 JS에서 사용할 수 있게 JSON으로 변환
    var steps = {{ steps | tojson | safe }};

    // 각 퀘스트마다 지도에 마커 표시
    steps.forEach(function(step) {
      if (step.lat && step.lng) {
        new naver.maps.Marker({
          position: new naver.maps.LatLng(step.lat, step.lng),
          map: map,
          title: step.title
        });
      }
    });
  });
</script>
{% endblock %}
